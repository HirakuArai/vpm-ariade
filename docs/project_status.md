# project_status.md

最終更新日: 2025-05-01  
バージョン: 1.7（T018.3 共通ユーティリティ統合完了）

---

## ■ 全体概要・進捗率：80%
- T017 （Kai 能力延長サイクル）完了済み。
- T018 モジュール統合はステップ3（共通ユーティリティ整備）まで完了。
- Kai 内部構造の再利用性と保守性が大幅に向上。
- T006 (提案 UI 改善) も並行して進行中。

---

## ■ タスク一覧
| タスクID | 内容                                                       | 状況         |
|----------|------------------------------------------------------------|--------------|
| T001     | Function Calling による文脈判断の拡張                      | 未着手       |
| T002     | 大規模ログ整形・RAG テスト                                 | 一時停止中   |
| T004     | セキュリティ要件整理                                      | 未着手       |
| T005     | Kai の自己改修機構整備（Step 3〜6）                         | ✅完了       |
| T006     | UI 整備プロトタイプ化（提案 UI 改善）                       | 進行中       |
| T007     | AST→JSON 日次自動生成 (`extract_capabilities.py`)          | 予定         |
| T008     | 役割→必要能力マッピング (`role_mapper.py`)                 | 予定         |
| T009     | ギャップ算出Ⅱ UI 表示 (`capability_diff.py`)               | 予定         |
| T010     | GPT 生成コード適用スキーマ (`propose_capability_code`)      | 予定         |
| T017     | 能力延長サイクルの確立（差分→優先度→選定→保存）             | ✅完了       |
| T018     | コア機能のモジュール統合と import 整理                        | 🟨 進行中（Step 3まで完了） |

---

## ■ 進行中の改善・検討ポイント
- 💾 反映完了時のトースト表示とコミットハッシュ提示を追加予定。
- 差分ビューに行番号とハイライトを付与し UX 向上。
- `patch_history.json` が Cloud 再起動で欠落しないよう自動 push 対応済。

---

## ■ 直近の改善提案・反映内容
- `get_today_log_path()`：例外処理・ログフォルダ生成を明示。
- `append_to_log()`： docstring 追加で可読性向上。
- `kai_patch_applier.py`： `patch_history.json`への追記と Git 連携を統合。
- `next_task_selector.py` → `core/task_selector.py` に移行。
- `stub_writer.py` → `core/stub_writer.py` に移行。
- `scripts/` 配下の旧スクリプトを整理・削除済。
- `core/utils.py` を新設し、`load_json`, `read_file`, `ensure_output_dir` 等を共通化。
- `task_selector.py`, `stub_writer.py`, `app.py` 内の関数を `utils.py` 経由に統一。

---

## ■ 今後のマイルストン（昨曜）
| 日付        | 目標                                                       |
|-------------|------------------------------------------------------------|
| 2025-05-01  | **T006 完了**：提案 UI 改善 & 反映フィードバック強化        |
| 2025-05-03  | `project_status.md` 自動更新 PoC                           |
| 2025-05-10  | 能力循環ループ自動化（T007〜T010）                         |
| 2025-05-15  | RAG PoC 再開（T002）                                       |
| 2025-05-25  | MVP 判定レビュー                                           |

---

## ■ コメント
- T018.3 にて `core/utils.py` に共通ユーティリティを整理・統一し、Kai の内部構造が明確化。
- モジュールの再利用・拡張が容易になり、次ステップ（T018.4 or T006改善）への移行がスムーズに。  
- Cloud 反映により Kai の回答内容にも `project_status.md` の更新が即座に反映される状態が継続中。
