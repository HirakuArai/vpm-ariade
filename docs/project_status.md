# project_status.md

最終更新日: 2025-05-01  
バージョン: 1.8（T018 完了：Kai機能のモジュール統合整理）

---

## ■ 全体概要・進捗率：85%
- T017（Kai 能力拡張サイクル）はすでに一巡完了。
- T018（モジュール統合と内部構造整理）は Step 4 まで全て完了。
- コード再利用・構造保守性の観点で MVP 準備の基盤が確立。
- Kai UI（T006）と能力循環（T007〜）への接続準備が整った。

---

## ■ タスク一覧
| タスクID | 内容                                                       | 状況         |
|----------|------------------------------------------------------------|--------------|
| T001     | Function Calling による文脈判断の拡張                      | 未着手       |
| T002     | 大規模ログ整形・RAG テスト                                 | 一時停止中   |
| T004     | セキュリティ要件整理                                      | 未着手       |
| T005     | Kai の自己改修機構整備（Step 3〜6）                         | ✅完了       |
| T006     | UI 整備プロトタイプ化（提案 UI 改善）                       | 進行中       |
| T007     | AST→JSON 日次自動生成 (`extract_capabilities.py`)          | 予定         |
| T008     | 役割→必要能力マッピング (`role_mapper.py`)                 | 予定         |
| T009     | ギャップ算出Ⅱ UI 表示 (`capability_diff.py`)               | 予定         |
| T010     | GPT 生成コード適用スキーマ (`propose_capability_code`)      | 予定         |
| T017     | 能力延長サイクルの確立（差分→優先度→選定→保存）             | ✅完了       |
| T018     | コア機能のモジュール統合と import 整理                        | ✅完了       |

---

## ■ 進行中の改善・検討ポイント
- 💾 反映完了時のトースト表示とコミットハッシュ提示を追加予定。
- 差分ビューに行番号とハイライトを付与し UX 向上。
- `patch_history.json` が Cloud 再起動で欠落しないよう自動 push 対応済。

---

## ■ 直近の改善提案・反映内容
- `get_today_log_path()`：例外処理・ログフォルダ生成を明示。
- `append_to_log()`： docstring 追加で可読性向上。
- `kai_patch_applier.py`： `patch_history.json`への追記と Git 連携を統合。
- `core/utils.py` を新設し、`load_json`, `read_file`, `ensure_output_dir` 等を共通化。
- `task_selector.py`, `stub_writer.py`, `app.py`, `scripts/*.py` を `utils` 参照に統一。
- `scripts/` 配下の不要な関数を削除、必要スクリプトのみ整理してGit管理化。

---

## ■ 今後のマイルストン（昨曜）
| 日付        | 目標                                                       |
|-------------|------------------------------------------------------------|
| 2025-05-03  | `project_status.md` 自動更新 PoC                           |
| 2025-05-10  | 能力循環ループ自動化（T007〜T010）                         |
| 2025-05-15  | RAG PoC 再開（T002）                                       |
| 2025-05-25  | MVP 判定レビュー                                           |

---

## ■ コメント
- T018 の全ステップ完了により Kai の内部構造が整理され、拡張性と再利用性の高い基盤が完成。
- 今後の UI 操作強化（T006）や自動ループ構築（T007〜）への移行がスムーズに行える状態。  
- MVP 判定に向けた構造面の要件は事実上クリア済み。
